(this["webpackJsonpharmonic-visualizer"]=this["webpackJsonpharmonic-visualizer"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var i,r,a,c=n(3),o=n.n(c),s=n(8),u=n.n(s),h=(n(14),n(1)),l=(n(15),n(16),n.p+"static/media/plus.2e81f370.svg"),d=n.p+"static/media/minus.05fcd03d.svg",f=n(2),v=function(){var e=Object(c.useState)(d),t=Object(h.a)(e,2),n=t[0],i=t[1];return Object(f.jsxs)("div",{className:"description",children:[Object(f.jsxs)("div",{className:"description-header",children:[Object(f.jsx)("h3",{className:"subheader",children:"The Harmonic Series in Music"}),Object(f.jsx)("img",{onClick:function(){var e=document.getElementsByClassName("description-body")[0];null!==e&&(n===d?(e.classList.add("collapsed"),i(l)):(e.classList.remove("collapsed"),i(d)))},className:"toggle-description",src:n,alt:"Expand/Collapse Description"})]}),Object(f.jsxs)("div",{className:"description-body",children:[Object(f.jsx)("p",{children:"Imagine you strike a string in a guitar."}),Object(f.jsx)("p",{children:"Now, you are expecting to hear back a tone - the one that corresponds to the string. In reality, what we end up hearing is much more than that - it is a whole collection of tones. The collection starts with a low tone which is the intended one, and it's followed by a series of higher pitch tones that are relative to the initial tone."}),Object(f.jsx)("p",{children:"Althought this is an infinite series, we can only hear a small subset of these tones."}),Object(f.jsx)("p",{children:"These following tones are called harmonics or overtones"}),Object(f.jsx)("h3",{className:"subheader",children:"Why does this happen?"}),Object(f.jsx)("p",{children:"When we hit a string, the string starts bouncing up and down creating a vibration. The tone we are producing is dictated by the frequency at which the string is vibrating. This vibration is creating a series of sine waves - the first sine wave is one big wave bouncing through the whole string, the second one is of two waves, the third of three waves, and so on. All these different vibrations in the string are happening at the same time!"}),Object(f.jsx)("p",{children:"The tones produced by the string come from the wavelength of those sine waves - the first series has one long sine wave, it has the smallest frequency and therefore the lowest tone, and the following frequencies will come from the subsequent sine waves in the series which are getting smaller and smaller, therefore playing higher and higher tones."})]})]})},g=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],m=function(e){var t=Math.log(e/440)/Math.log(2)*12;return Math.round(t)+69},b=function(e,t){return Math.floor(1200*Math.log(e/function(e){return 440*Math.pow(2,(e-69)/12)}(t))/Math.log(2))},j=function(e,t){var n=b(e,t);return 0===n?"":n<0?"flat":"sharp"},w=function(e){return g[e%12]},p=(n(18),function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null),i=0;Object(c.useEffect)((function(){var i=t.current;if(null!==i&&null!==t.current){i.width=2*e.width,i.height=2*e.height,i.style.width="".concat(e.width,"px"),i.style.height="".concat(e.height,"px");var a=i.getContext("2d");null!==a&&(n.current=a,r())}}),[e.frequency,e.height,e.width]);var r=function r(){if(null!==n.current&&null!==t.current){var a=n.current,c=t.current;a.clearRect(0,0,c.width,c.height),a.beginPath();for(var o=0;o<c.width;o++){var s=c.height/2+50*Math.sin(o/c.width*Math.PI*e.waves)*Math.sin(i);a.lineTo(o,s)}a.lineWidth=10,a.strokeStyle=function(){var t="white",n=localStorage.getItem("elementHovered");return null===n?t:parseInt(n,10)===e.frequency?"#2f8b44":t}(),a.stroke(),window.requestAnimationFrame(r),i+=.1}};return Object(f.jsx)("canvas",{className:"sine-wave",ref:t})}),O=n(9),y=function(){var e=document.getElementsByClassName("harmonic-element-container")[0];if(void 0===e)return 0;var t=window.getComputedStyle(e).width;return.6*parseInt(t,10)},x=function(e){var t=Object(c.useState)(0),n=Object(h.a)(t,2),i=n[0],r=n[1],a=0;Object(c.useEffect)((function(){r(y());var e=function(){r(y())};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var o=function(e){for(var t=[],n=0;n<8;n++){var i=m(e*(n+1)),r=w(i%12),a=j(e,i),c={frequency:e*(n+1),note:"".concat(r," ").concat(a)};t[n]=c}return t}(e.frequency),s=function(e,t){t?localStorage.setItem("elementHovered",e.toString()):localStorage.setItem("elementHovered","0")};return Object(f.jsxs)("div",{className:"harmonic-series",children:[Object(f.jsx)("h3",{children:"Your Harmonic Series"}),Object(f.jsxs)("div",{className:"harmonic-table-container",children:[Object(f.jsx)("div",{children:"Frequency - Note"}),Object(f.jsx)("div",{className:"wave-header",children:"Vibration of String"})]}),o.map((function(e){return a++,Object(f.jsxs)("div",{className:"harmonic-element-container",onClick:function(){return t=e.frequency,void(new O.a).toDestination().triggerAttackRelease(t,"8n");var t},onMouseEnter:function(){return s(e.frequency,!0)},onMouseLeave:function(){return s(0,!1)},children:[Object(f.jsxs)("div",{id:e.frequency.toString(),children:[e.frequency," Hz - ",e.note]}),Object(f.jsx)("div",{className:"sine-wave",children:Object(f.jsx)(p,{frequency:e.frequency,height:100,width:i,waves:a})})]},e.frequency)}))]})},q=(n(28),null),S=new Float32Array(2048),M=!1,N=0,A="",k={audio:{advanced:[{echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1}]}},F=function(){alert("Stream generation failed.")},C=function(e){M||(r=new AudioContext,M=!0),a=e,function(e){try{navigator.getUserMedia(k,e,F)}catch(t){alert("getUserMedia threw exception :"+t)}}(E)},E=function(e){q=r.createMediaStreamSource(e),(i=r.createAnalyser()).fftSize=2048,q.connect(i),T()},T=function e(){i.getFloatTimeDomainData(S);var t=function(e,t){for(var n=e.length,i=0,r=0;r<n;r++){var a=e[r];i+=a*a}if((i=Math.sqrt(i/n))<.01)return-1;for(var c=0,o=n-1,s=0;s<n/2;s++)if(Math.abs(e[s])<.2){c=s;break}for(var u=1;u<n/2;u++)if(Math.abs(e[n-u])<.2){o=n-u;break}n=(e=e.slice(c,o)).length;for(var h=new Array(n).fill(0),l=0;l<n;l++)for(var d=0;d<n-l;d++)h[l]=h[l]+e[d]*e[d+l];for(var f=0;h[f]>h[f+1];)f++;for(var v=-1,g=-1,m=f;m<n;m++)h[m]>v&&(v=h[m],g=m);var b=g,j=h[b-1],w=h[b],p=h[b+1],O=(j+p-2*w)/2;return O&&(b-=(p-j)/2/(2*O)),t/b}(S,r.sampleRate);if(-1!==t){var n=Math.round(t),c=m(n),o=j(t,c),s="".concat(w(c%12)," ").concat(o);""!==A&&A===s||(A=s),a(s,n)}window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame),N=window.requestAnimationFrame(e)},I=n.p+"static/media/SpeakerOn.4c640b39.svg",L=n.p+"static/media/SpeakerOff.4255cd4c.svg",z=function(e){var t=Object(c.useState)(!1),n=Object(h.a)(t,2),i=n[0],r=n[1],a=Object(c.useState)(!1),o=Object(h.a)(a,2),s=o[0],u=o[1],l="".concat(e.frequency," Hz"),d=""!==e.note?"- ".concat(e.note.toString()):"";return Object(f.jsxs)("div",{onClick:function(){i?(window.cancelAnimationFrame(N),console.log("Audio stream stopped")):C(e.updateNoteAndFrequency),r((function(e){return!e}))},className:"note-banner",onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return u(!1)},children:[0!==e.frequency||i?"".concat(l," ").concat(d):"To find your harmonic series, click here and play any sound"," ",function(){var t=Object(f.jsx)("img",{height:"30px",width:"30px",src:I,alt:"Speaker is on"}),n=Object(f.jsx)("img",{height:"30px",width:"30px",src:L,alt:"Speaker is off"});return i&&s?i?t:n:!i&&s&&0!==e.frequency?n:null}()]})},D=function(){var e=o.a.useState(0),t=Object(h.a)(e,2),n=t[0],i=t[1],r=o.a.useState(""),a=Object(h.a)(r,2),c=a[0],s=a[1];return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(v,{}),Object(f.jsx)(z,{updateNoteAndFrequency:function(e,t){s(e),i(t)},note:c,frequency:n}),Object(f.jsx)("br",{}),0!==n?Object(f.jsx)(x,{frequency:n}):null]})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,30)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),a(e),c(e)}))};u.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(D,{})}),document.getElementById("root")),H()}},[[29,1,2]]]);
//# sourceMappingURL=main.92f91282.chunk.js.map