(this["webpackJsonpharmonic-visualizer"]=this["webpackJsonpharmonic-visualizer"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var i,r,a,c=n(3),o=n.n(c),s=n(8),h=n.n(s),l=(n(14),n(1)),u=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],d=function(e){var t=Math.log(e/440)/Math.log(2)*12;return Math.round(t)+69},f=function(e,t){return Math.floor(1200*Math.log(e/function(e){return 440*Math.pow(2,(e-69)/12)}(t))/Math.log(2))},j=function(e,t){var n=f(e,t);return 0===n?"":n<0?"flat":"sharp"},b=function(e){return u[e%12]},w=null,g=new Float32Array(2048),m=!1,v=0,x="",O={audio:{advanced:[{echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1}]}},p=function(){alert("Stream generation failed.")},y=function(e){m||(r=new AudioContext,m=!0),a=e,function(e){try{navigator.getUserMedia(O,e,p)}catch(t){alert("getUserMedia threw exception :"+t)}}(q)},q=function(e){w=r.createMediaStreamSource(e),(i=r.createAnalyser()).fftSize=2048,w.connect(i),M()},M=function e(){i.getFloatTimeDomainData(g);var t=function(e,t){for(var n=e.length,i=0,r=0;r<n;r++){var a=e[r];i+=a*a}if((i=Math.sqrt(i/n))<.01)return-1;for(var c=0,o=n-1,s=0;s<n/2;s++)if(Math.abs(e[s])<.2){c=s;break}for(var h=1;h<n/2;h++)if(Math.abs(e[n-h])<.2){o=n-h;break}n=(e=e.slice(c,o)).length;for(var l=new Array(n).fill(0),u=0;u<n;u++)for(var d=0;d<n-u;d++)l[u]=l[u]+e[d]*e[d+u];for(var f=0;l[f]>l[f+1];)f++;for(var j=-1,b=-1,w=f;w<n;w++)l[w]>j&&(j=l[w],b=w);var g=b,m=l[g-1],v=l[g],x=l[g+1],O=(m+x-2*v)/2;return O&&(g-=(x-m)/2/(2*O)),t/g}(g,r.sampleRate);if(-1!==t){var n=Math.round(t),c=d(n),o=j(t,c),s="".concat(b(c%12)," ").concat(o);""!==x&&x===s||(x=s),a(s,n)}window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame),v=window.requestAnimationFrame(e)},A=(n(15),n(16),n(2)),F=function(){return Object(A.jsxs)("div",{className:"description",children:[Object(A.jsx)("h3",{className:"subheader",children:"The Harmonic Series in Music"}),Object(A.jsx)("p",{children:"When a tone is played (not only in music, but also in nature). What we hear is a mix of tone - it starts with a low tone which is the intended one, and it's followed by a series of higher pitch tones that are relative to the initial tone."}),Object(A.jsx)("p",{children:"Althought this is an infinite series, we can only hear a small subset of these tones."}),Object(A.jsx)("p",{children:"These following tones are called harmonics or overtones"}),Object(A.jsx)("h3",{className:"subheader",children:"Why does this happen?"}),Object(A.jsx)("p",{children:"Imagine you are playing a guitar."}),Object(A.jsx)("p",{children:"When we hit a string, we produce a tone which is dictated by the frequency at which that string is bouncing up and down. The string is now vibrating, creating a series of sine waves - the first sine wave is one big wave bouncing throug the whole string, the second one is of two waves, the third of three waves and so on."}),Object(A.jsx)("p",{children:"The tones produced by the string come from the wavelength of those sine waves which are all happening together - the first series has one long sine wave, it has the smallest frequency and therefore the lowest tone, and the following frequencies will come from the subsequent sine waves in the series which are getting smaller and smaller, therefore playing higher and higher tones."})]})},S=(n(18),n(9)),N=function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null),i=0;Object(c.useEffect)((function(){var i=t.current;if(null!==i&&null!==t.current){i.width=2*e.width,i.height=2*e.height,i.style.width="".concat(e.width,"px"),i.style.height="".concat(e.height,"px");var a=i.getContext("2d");null!==a&&(n.current=a,r())}}),[e.frequency,e.height,e.width]);var r=function r(){if(null!==n.current&&null!==t.current){var a=n.current,c=t.current;a.clearRect(0,0,c.width,c.height),a.beginPath();for(var o=0;o<c.width;o++){var s=c.height/2+50*Math.sin(.0039*o*e.waves+0)*Math.sin(i);a.lineTo(o,s)}a.lineWidth=10,a.strokeStyle="white",a.stroke(),window.requestAnimationFrame(r),i+=.1}};return Object(A.jsx)("canvas",{className:"sine-wave",onMouseUp:function(){(new S.a).toDestination().triggerAttackRelease(e.frequency,"8n")},ref:t})},C=function(e){if(0===e.frequency)return null;for(var t=[],n=0,i=0;i<8;i++){var r=d(e.frequency*(i+1)),a=b(r%12),c=j(e.frequency,r),o={frequency:e.frequency*(i+1),note:"".concat(a," ").concat(c)};t[i]=o}return Object(A.jsxs)("div",{className:"harmonic-series",children:[Object(A.jsx)("h3",{children:"Your Harmonic Series"}),Object(A.jsx)("table",{className:"harmonic-table",children:Object(A.jsxs)("tbody",{children:[Object(A.jsxs)("tr",{className:"table-header",children:[Object(A.jsx)("th",{children:"Frequency"}),Object(A.jsx)("th",{children:"Note"}),Object(A.jsx)("th",{children:"Vibration of String"})]}),t.map((function(e){return n++,Object(A.jsxs)("tr",{className:"table-entry",children:[Object(A.jsxs)("th",{children:[e.frequency," Hz"]}),Object(A.jsx)("th",{children:e.note}),Object(A.jsx)("th",{className:"sine-wave",children:Object(A.jsx)(N,{frequency:e.frequency,height:100,width:400,waves:n})})]},e.frequency)}))]})})]})},k=(n(28),function(e){var t="".concat(e.frequency," Hz"),n=""!==e.note?"- ".concat(e.note.toString()):"";return Object(A.jsxs)("p",{className:"main-note",children:[t," ",n]})}),T=function(){var e=o.a.useState(!1),t=Object(l.a)(e,2),n=t[0],i=t[1],r=o.a.useState(0),a=Object(l.a)(r,2),c=a[0],s=a[1],h=o.a.useState(""),u=Object(l.a)(h,2),d=u[0],f=u[1],j=function(e,t){f(e),s(t)};return Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)(F,{}),Object(A.jsx)("button",{onClick:function(){y(j),i(!0)},hidden:n,children:"Find your Harmonic Series"}),Object(A.jsx)("button",{onClick:function(){window.cancelAnimationFrame(v),console.log("Audio stream stopped"),i(!1)},hidden:!n,children:"Pause Audio"}),Object(A.jsx)(k,{note:d,frequency:c}),Object(A.jsx)("br",{}),Object(A.jsx)(C,{frequency:c})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,30)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),a(e),c(e)}))};h.a.render(Object(A.jsx)(o.a.StrictMode,{children:Object(A.jsx)(T,{})}),document.getElementById("root")),D()}},[[29,1,2]]]);
//# sourceMappingURL=main.587620bb.chunk.js.map